## 环境配置

### 源配置

搭建好linux后，使用阿里云源配置，http://mirrors.aliyun.com，选择对应系统，下载好后，使用`yum makecahe`使其生效。

### JDK

wget下载压缩包，解压，然后配置环境变量，`vim etc/profile`

![image-20200803084606474](https://imagebag.oss-cn-chengdu.aliyuncs.com/img/image-20200803084606474.png)

### Tomcat

wget下载压缩包，解压后（添加环境变量）编辑conf/server.xml，在8080端口位置添加“ URIEncoding="UTF-8" ”，`bin/startup.sh`启动服务。`vim /etc/sysconfig/iptables`，添加开放端口

![image-20200803090347667](https://imagebag.oss-cn-chengdu.aliyuncs.com/img/image-20200803090347667.png)

### Maven

wget下载压缩包，解压后（添加环境变量）。

### vsftpd

执行`yum install vsftpd`安装，使用`whereis vsftpd`查看安装位置，创建访问目录，如"/ftpfile"，添加匿名用户`useradd ftpuser -d /ftpfile -s /sbin/nologin`,使用`chown -R ftpuser.ftpuser /ftpfile`修改用户和用户组

![image-20200803085505115](https://imagebag.oss-cn-chengdu.aliyuncs.com/img/image-20200803085505115.png)

`vim /etc/vsftpd/vsftpd.conf`编辑。

```conf
anonymous_enable=NO

local_root=/ftpfile

use_localtime=yes

chroot_list_enable=YES

chroot_list_file=/etc/vsftpd/chroot_list

pasv_min_port=61001

pasv_max_port=62000
```

`vim /etc/chroot_list`，添加上ftpfile对应的用户

`vim /etc/selinux/config`，修改SELINUX=disabled，

`vim /etc/sysconfig/iptables`，添加开放端口

service vsftpd restart启动服务。

### Nginx

wget下载Nginx，解压后，执行`./configure`进行检查，执行`./make`编译，`./make install`安装，`vim nginx/conf/nginx.con` 添加include vhost/*.conf; `vim vhost/www.imooc.com.conf`，添加如下转发规则

```conf
server {
    default_type 'text/html';
    charset utf-8;
    listen 80;
    autoindex on;
    server_name www.imooc.com;
    access_log /usr/local/nginx/logs/access.log combined;
    index index.html index.htm index.jsp index.php;
    #error_page 404 /404.html;
    if ( $query_string ~* ".*[\;'\<\>].*" ){
        return 404;
    }
    location / {
        proxy_pass http://127.0.0.1:8080;
        add_header Access-Control-Allow-Origin *;
    }
}
```

执行`./sbin/nginx -s reload`重启Nginx服务。至此，Tomcat、vsftpd、Nginx都已配置完成，通常使用Nginx反向代理进行请求转发，包括对tomcat的请求以及对ftp服务器的请求

### Mysql

`yum install`mysql后，`service mysqld start`启动服务，`grep 'temporary password' /var/log/mysqld.log`查看root初始密码，`alter user 'root'@'localhost' identified by 'root'`修改密码，创建用户，通过`update user set host='%' where user=''`使其可以通过外网访问，

### Git

